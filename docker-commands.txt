
docker run -it --rm --privileged --net=host -v $(pwd):/usr/workspace ubuntu:20.04

cd /usr/workspace

apt-get update
apt-get install -y python3-pip
python3 -m pip install -r mavlink/pymavlink/requirements.txt
DEBIAN_FRONTEND=noninteractive apt-get -y --quiet --no-install-recommends install gcc g++ cmake git libboost-all-dev lsb-release sudo wget
DEBIAN_FRONTEND=noninteractive apt-get -y --quiet --no-install-recommends install libopencv-dev
DEBIAN_FRONTEND=noninteractive apt-get -y --quiet --no-install-recommends install libgstreamer-plugins-base1.0-dev
sh -c 'echo "deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main" > /etc/apt/sources.list.d/gazebo-stable.list'
wget http://packages.osrfoundation.org/gazebo.key -O - | sudo apt-key add -
sudo apt-get update -y --quiet
DEBIAN_FRONTEND=noninteractive apt-get -y --quiet --no-install-recommends install gazebo11 libgazebo11-dev

#!/bin/bash
#
# Run gazebo in support of voxl2 hitl
#

# setup Gazebo env and update package path

export GAZEBO_RESOURCE_PATH=/usr/share/mavlink_sitl_gazebo:${GAZEBO_RESOURCE_PATH}
export GAZEBO_PLUGIN_PATH=/usr/lib/mavlink_sitl_gazebo/plugins:${GAZEBO_PLUGIN_PATH}
export GAZEBO_MODEL_PATH=/usr/share/mavlink_sitl_gazebo/models:${GAZEBO_MODEL_PATH}
export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/usr/lib/mavlink_sitl_gazebo/plugins
export GAZEBO_MODEL_DATABASE_URI=""

echo -e "GAZEBO_PLUGIN_PATH $GAZEBO_PLUGIN_PATH"
echo -e "GAZEBO_MODEL_PATH $GAZEBO_MODEL_PATH"
echo -e "LD_LIBRARY_PATH $LD_LIBRARY_PATH"

gazebo worlds/hitl_iris.world



docker run --rm -it --net=host --privileged -e DISPLAY=$DISPLAY     -v /dev/input:/dev/input:rw     -v /tmp/.X11-unix:/tmp/.X11-unix:ro  voxl-gazebo-docker:v1.0